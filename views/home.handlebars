{{#if loggedIn}}
  {{>private-nav}}  
{{else}}
  {{>public-nav}}  
{{/if}}

<main>
  <h1 class="text-center pt-4"> The Latest Posts </h1>
  <h3 class="text-center pb-4"> from the Tech Gang </h3>
  <div class="d-flex flex-wrap justify-content-around pb-20">
    {{#each posts as |post|}}
      <div class="card text-center p-2 card-elements" style="width: 20rem">
        <div class="card-body mx-auto">
          <img src={{post.image_url}} class="card-img-top" alt={{post.title}} />
          <h5 class="card-title text-center pt-4">{{post.title}}</h5>
          <p> Published: {{formatDate post.createdAt }} by {{post.user.username}}</p>
        </div>
        <div class="d-flex flex-wrap justify-content-around">
          {{#if post.loggedIn}}
            <a href='/post/{{post.id}}'>
              <button type="button" class="btn btn-primary">
                Read more
              </button>
            </a>
          {{else}}
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#loginModal">
              Read more
            </button>
              <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">Login</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      Please login or sign up now to view this content.
                    </div>
                    <div class="modal-footer">
                      <a href="/login">
                      <button type="button" class="btn btn-primary">Login</button>
                      </a>
                      <a href="/signup">
                      <button type="button" class="btn btn-secondary">Sign up</button>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
          {{/if}}
        </div>
    </div>
  {{/each}}
  </div>
</main>
